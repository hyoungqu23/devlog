{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2022-05-10/",
    "result": {"data":{"site":{"siteMetadata":{"title":"HyoungMin's mini-log"}},"markdownRemark":{"id":"48b0a5e8-2950-523a-a79d-cd3d0193ce2d","excerpt":"npm 온라인 저장소와 커맨드라인 도구로 구성된 npm은 Node Package Manager의 약어로, Node.js…","html":"<h2>npm</h2>\n<p>온라인 저장소와 커맨드라인 도구로 구성된 npm은 Node Package Manager의 약어로, Node.js 프로젝트를 관리하는 필수적인 도구이다. 온라인 저장소에는 수많은 오픈소스 라이브러리와 도구들이 업로드 되어, 필요하다면 손쉽게 검색해 프로젝트에 추가할 수 있다. 또한, 프로젝트 관리를 위한 다양한 명령어(저장소에서 라이브러리, 도구를 설치, 프로젝트 설정하고 관리, 프로젝트 의존성 관리 등)를 제공한다.</p>\n<h2>npm 명령어</h2>\n<p>npm 커맨드라인 도구의 사용법을 알고 있어야 한다.</p>\n<h3>프로젝트 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm init</code></pre></div>\n<p>프로젝트 디렉토리 내부에서 해당 명령어를 활용하면 프로젝트 관련 정보들이 저장되는 <code class=\"language-text\">package.json</code> 파일을 만들어주고, 이 디렉토리는 Node.js 프로젝트가 된다. <code class=\"language-text\">package.json</code> 파일을 직접 수정하거나 npm 명령어를 통해 프로젝트 정보(버전, 이름, 설명, 스크립트, 의존성 패키지 등)를 수정할 수 있다.</p>\n<h4>dependencies</h4>\n<p>프로젝트 내에서 사용하는 라이브러리를 의미한다. 즉, 프로젝트가 실행되기 위해 외부 라이브러리에 의존하므로, dependencies를 관리해야 한다.</p>\n<h4>라이브러리</h4>\n<p>라이브러리란 특정 기능을 수행하는 코드의 묶음을 의미하는데, 복잡한 기능들을 직접 작성하지 않고 효율성을 위해 다른 사람이 구현한 해당 기능을 불러와 사용하는 것이다. Node.js에서는 패키지라고도 부른다.</p>\n<h3>프로젝트 dependencies 관리(라이브러리 설치)</h3>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install</code></pre></div>\n<p>프로젝트 dependencies를 관리하기 위해 해당 명령어를 활용한다. 축약형인 <code class=\"language-text\">npm i</code>로도 가능하다. 이는 사용하는 옵션에 따라 여러 용도로 사용할 수 있다. 즉, 의존성을 추가하거나 내려받거나, 개발용 의존성을 추가하거나 전역 패키지를 추가하는 등의 작업을 할 수 있다.</p>\n<h4>dependencies 추가</h4>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install [package name]</code></pre></div>\n<p>해당 명령어를 통해 필요한 패키지를 프로젝트에 추가할 수 있다. 이렇게 추가된 패키지는 <code class=\"language-text\">package.json</code> 파일 <code class=\"language-text\">dependencies</code> 내부에 작성되고, <code class=\"language-text\">node_modules</code> 디렉토리에 저장된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install [package name]@[version]</code></pre></div>\n<p>참고로 이때 <code class=\"language-text\">@[version]</code>을 추가해 패키지의 특정 버전을 추가할 수 있다. 버전이 올라갈수록 하위 호환성 문제가 발생할 수 있기 때문에 버전을 추가해 패키지를 지정할 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">@[~1.13.0]</code>: <code class=\"language-text\">1.13.x</code> 버전 설치</li>\n<li><code class=\"language-text\">@[^1.13.0]</code>: <code class=\"language-text\">1.x.x</code> 버전 설치</li>\n<li><code class=\"language-text\">@[0.13.0]</code>: <code class=\"language-text\">0.13.0</code> 버전 설치</li>\n</ul>\n<p>프로젝트에 dependencies를 추가하면 <code class=\"language-text\">package-lock.json</code> 파일이 생성되는데, 버전을 명시하지 않은 패키지는 자동으로 최신 버전으로 추가된다. 이때 이러한 패키지들의 버전이 변경되지 않도록 설치된 버전을 고정하는 역할을 하는 파일이다.</p>\n<h4>devDependencies</h4>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install [package name] --save-dev</code></pre></div>\n<p><code class=\"language-text\">--save-dev</code> 옵션을 추가한 명령어를 통해 배포 전까지만 사용하는 의존성으로 devDependencies를 분리하여 관리할 수 있다. <code class=\"language-text\">package.json</code> 파일 <code class=\"language-text\">devDependencies</code> 내부에 작성된다.</p>\n<h4>dependencies &#x26; devDependencies 내려받기</h4>\n<p>일반적으로 <code class=\"language-text\">node_modules</code> 디렉토리는 코드를 관리할 때나 배포할 때는 dependencies 추가로 인한 용량 문제와 운영체제별로 실행되는 코드의 상이함 때문에 업로드하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install</code></pre></div>\n<p>따라서 협업 혹은 다른 사람의 코드를 받아서 실행하는 경우에 해당 명령어를 아무 옵션 없이 사용해 <code class=\"language-text\">package.json</code>의 <code class=\"language-text\">dependencies</code>와 <code class=\"language-text\">devDependencies</code> 내부에 정의되어 있는 패키지들을 <code class=\"language-text\">node_modules</code> 디렉토리에 내려받을 수 있다.</p>\n<h4>dependencies 내려받기</h4>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install --production</code></pre></div>\n<p>프로젝트를 배포할 때는 devDependencies를 포함할 필요가 없기 때문에 해당 명령어를 활용해서 <code class=\"language-text\">package.json</code>의 <code class=\"language-text\">dependencies</code> 내부에 정의된 패키지들만 <code class=\"language-text\">node_modules</code> 디렉토리에 내려받으면 된다.</p>\n<h4>전역 dependencies 추가</h4>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm install [package name] --global</code></pre></div>\n<p><code class=\"language-text\">--global</code> 옵션을 통해 패키지를 전역 패키지 디렉토리에 추가할 수 있다. 주로 프로젝트에 종속되지 않는 커맨드라인 도구들(express-generator, pm2 등)을 전역 패키지로 추가하여 사용한다.</p>\n<p>다만, 로컬 패키지를 활용해 <code class=\"language-text\">package.json</code>에 명시적으로 선언되어 있는 것이 프로젝트 관리에 더 좋다.</p>\n<h4>dependencies 제거</h4>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm remove [package name]</code></pre></div>\n<p>해당 명령어를 통해 <code class=\"language-text\">package.json</code> 파일 내의 <code class=\"language-text\">dependencies</code>, <code class=\"language-text\">devDependencies</code>, <code class=\"language-text\">node_modules</code> 디렉토리 모두에서 패키지를 삭제할 수 있다.</p>\n<h3>스크립트 실행</h3>\n<p>간단한 동작을 수행하는 코드로, <code class=\"language-text\">package.json</code> 파일 내의 <code class=\"language-text\">scripts</code>에 선언된 스크립트를 다음 명령어를 통해 실행할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm run [script name]</code></pre></div>\n<p>주로 의존성 패키지를 사용할 때, node_modules에 설치된 파일을 직접 실행하는 것이 아니라, 패키지의 module을 직접적으로 호출해 사용할 수 있게 해준다.</p>\n<ul>\n<li><code class=\"language-text\">npm test</code>: 코드 유닛 테스트 등에 활용</li>\n<li><code class=\"language-text\">npm start</code>: 프로젝트 실행</li>\n<li><code class=\"language-text\">npm stop</code>: 프로젝트 종료</li>\n</ul>\n<h2>npx</h2>\n<p>npx는 npm의 새롭게 추가된 기능 중 하나로, npm 패키지를 설치하지 않고 사용할 수 있게 해주는 도구이다. 즉, 프로젝트에 추가하거나 전역 패키지로 추가하지 않고, npx를 이용하여 바로 실행할 수 있다.</p>\n<p>또한, 다음과 같이 Node.js의 특정 버전을 설치하지 않고 실행하여 버전별 실행 환경을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npx node@12 index.js\r\nnpx node@14 index.js</code></pre></div>\n<p>추가적으로 github에 등록된 간단한 코드 조각인 gist 코드를 실행해볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npx https://github.com/examples/example_gist_practice</code></pre></div>\n<h2>Modules</h2>\n<p>간단한 프로그램이라면 파일 하나만으로도 실행이 가능할 것이다. 하지만 프로젝트가 커지면 커질수록 기능에 맞게 코드를 분리하는 것이 중요해진다. 이때 Modules은 코드를 분리하기 위한 방법 중 하나이다. 즉, 반복되는 코드를 Module로 분리하여 사용할 수 있다. 참고로 앞서 살펴본 패키지는 Module의 모음이라고 볼 수 있다.</p>\n<h3>기본 제공 Modules</h3>\n<p>Node.js는 다양한 Module을 기본적으로 제공한다.</p>\n<h4><code class=\"language-text\">console</code></h4>\n<p>브라우저에서 제공되는 console과 유사한 디버깅 도구로, <code class=\"language-text\">log</code>, <code class=\"language-text\">warn</code>, <code class=\"language-text\">error</code> 함수로 로그 레벨을 표시하거나, <code class=\"language-text\">time</code>, <code class=\"language-text\">timeLog</code>, <code class=\"language-text\">timeEnd</code> 함수로 시간을 추적할 수 있다.</p>\n<h4><code class=\"language-text\">process</code></h4>\n<p>현재 실행 프로세스와 관련된 기능을 제공하는 Module로 <code class=\"language-text\">arch</code>, <code class=\"language-text\">argv</code>, <code class=\"language-text\">env</code> 등 실행 환경 및 변수 관련 값이나 <code class=\"language-text\">abort</code>, <code class=\"language-text\">kill</code>, <code class=\"language-text\">exit</code> 등 프로세스 동작에 관련된 함수를 제공한다.</p>\n<h4><code class=\"language-text\">fs</code>(file-system)</h4>\n<p>파일의 입출력을 위한 Module로 <code class=\"language-text\">readFile</code>, <code class=\"language-text\">writeFile</code> 함수나 <code class=\"language-text\">readFileSync</code>, <code class=\"language-text\">writeFileSync</code> 함수로 동기적 작업을 제공하며, <code class=\"language-text\">watch</code> 함수로 파일이나 디렉토리의 변경 이벤트를 감지할 수 있다.</p>\n<h4><code class=\"language-text\">http</code></h4>\n<p>http 서버, 클라이언트 제작을 위해 사용되는 Module로, <code class=\"language-text\">createServer</code> 함수로 서버를 생성하고, <code class=\"language-text\">Request</code> 함수로 http 요청을 생성한다.</p>\n<h3>Module 작성</h3>\n<blockquote>\n<p>module.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"elice\"</span>\r\n<span class=\"token keyword\">const</span> age <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\r\n<span class=\"token keyword\">const</span> nationality <span class=\"token operator\">=</span> <span class=\"token string\">\"korea\"</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  name<span class=\"token punctuation\">,</span>\r\n  age<span class=\"token punctuation\">,</span>\r\n  nationality<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>app.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> student <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./module\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'elice'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">nationality</span><span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Module이 로드될 때 사용될 값을 <code class=\"language-text\">module.exports</code>로 내보내는 것을 확인할 수 있다.</p>\n<p>이와 달리 변수명을 활용해 각 key - value를 지정해 <code class=\"language-text\">exports</code>하는 방법도 있다.</p>\n<blockquote>\n<p>module.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"elice\"</span>\r\n<span class=\"token keyword\">const</span> age <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\r\n<span class=\"token keyword\">const</span> nationality <span class=\"token operator\">=</span> <span class=\"token string\">\"korea\"</span>\r\n\r\nexports<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\r\nexports<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age\r\nexports<span class=\"token punctuation\">.</span>nationality <span class=\"token operator\">=</span> nationality</code></pre></div>\n<blockquote>\n<p>app.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> student <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./module\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'elice'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">nationality</span><span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>함수형으로 Module을 작성해 <code class=\"language-text\">exports</code>할 수 있고, 이때 Module 사용 시 값을 정할 수 있게 내보낼 수 있다.</p>\n<blockquote>\n<p>module.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> nationality</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\r\n    name<span class=\"token punctuation\">,</span>\r\n    age<span class=\"token punctuation\">,</span>\r\n    nationality<span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>함수형 Module의 경우 로드한 뒤 바로 실행되지 않고 로드한 함수를 실행해야 Module을 활용할 수 있다.</p>\n<blockquote>\n<p>app.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> student <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./module\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token string\">'elice'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'korea'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'elice'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">nationality</span><span class=\"token operator\">:</span> <span class=\"token string\">'korea'</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Module을 만드는 여러 방법이 있지만, 로드할 때는 <code class=\"language-text\">require</code> 함수만을 활용한다. 다만, <code class=\"language-text\">require</code>할 때 Module의 코드가 실행된다. 또한 첫 <code class=\"language-text\">require</code>시 실행되고, 이후에는 cache된 Module을 가져다가 사용하게 된다. 따라서 해당 Module의 코드를 여러 번 반복 실행하기 위해서는 함수형 Module로 작성해야 한다.</p>\n<p>참고로 JSON 파일의 경우, Module로써 로드할 수 있는데, 이는 object data로 자동으로 parsing된다.</p>\n<h3>ES Module</h3>\n<p>ES6에서 등장한 JavaScript의 공식적인 표준 Module(<code class=\"language-text\">export</code>, <code class=\"language-text\">import</code>)로, 독자적인 방식으로 Node.js가 지원하는 commonjs Module(<code class=\"language-text\">module.exports</code>, <code class=\"language-text\">require</code>)과 문법, 기본적인 동작 방식 등이 다르다. 따라서 같이 사용하기에는 부적절하다.</p>\n<h2>웹</h2>\n<h3>웹의 이해</h3>\n<p>웹은 사전적으로 인터넷 상에 동작하는 모든 서비스를 의미하고, 일반적으로는 웹 브라우저로 접속해 이용하는 서비스인 웹 사이트를 의미한다.</p>\n<h3>웹 서비스 동작 방식</h3>\n<p>웹 서비스는 기본적으로 <strong>HTTP 요청과 응답</strong>의 반복으로 이루어진다.</p>\n<p>사용자가 URL을 입력하면, 브라우저가 인터넷을 통해 HTTP 요청을 서버에 전달하고, 서버는 사용자의 HTTP 응답을 브라우저로 전송한다. 이후 웹 브라우저는 HTTP 응답을 시각화하여 사용자에게 적절한 화면으로 노출한다.</p>\n<h4>HTTP 요청</h4>\n<p>HTTP 요청은 사용자가 <strong>어떤 데이터가 필요한지를 서버에게 알리는</strong> 역할이다. 즉, HTTP 요청은 어떤 사용자가 어떤 데이터를 필요로 하는지에 대해서 담고 있다.</p>\n<blockquote>\n<p>GET / HTTP/1.1\r\nHost: localhost:3000\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:93.0)\r\nAccept: text/html\r\nAccept-Language: ko-KR\r\nAccept-Encoding: gzip, deflate\r\nConnection: keep-alive</p>\n</blockquote>\n<h4>HTTP 응답</h4>\n<p>HTTP 응답은 <strong>HTTP 요청에 해당하는 적절한 데이터를 전달</strong>하는 역할이다. 즉, HTTP 응답은 사용자가 요청한 데이터와 어떤 데이터가 전송되는 지 등을 담고 있다.</p>\n<h5>전송된 데이터</h5>\n<blockquote>\n<p>HTTP/1.1 200 OK\r\nX-Powered-By: Express\r\nContent-Type: text/html; charset=utf-8\r\nDate: Mon, 25 Oct 2021 14:10:35 GMT\r\nConnection: keep-alive\r\nKeep-Alive: timeout=5</p>\n</blockquote>\n<h5>사용자가 요청한 데이터</h5>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Hello, World!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>정적 웹(WEB 1.0)과 동적 웹(WEB 2.0)</h3>\n<p>정적 웹은 사용자와 상호작용하지 않는 페이지로, 단방향 통신만을 하고, Link를 통한 페이지 이동 정도만 가능하다. 일반적으로 변하지 않는 HTML 문서가 제공된다.</p>\n<p>이와 다르게 동적 웹은 양방향 통신으로, 사용자와 상호작용을 하고, 구글 맵 검색, 웹 채팅 등 사용자가 다양한 기능을 수행할 수 있으며, 프론트엔드와 백엔드가 유기적으로 통신하며 동작한다.</p>\n<h4>동적 웹의 구현 방법</h4>\n<p>**CSR(Client-Side Rendering)**은 프론트엔드에서 사용자가 페이지에서 보는 동적인 부분을 처리하고 백엔드와 API 통신으로 데이터만 주고받는 방식이고, **SSR(Server-Side Rendering)**은 백엔드에서 페이지 대부분의 영역을 처리해 HTTP 응답에 전달하고, 프론트엔드는 그 HTTP 응답을 받아 화면에 표시만 하는 방식이다.</p>\n<h5>CSR 특징</h5>\n<ul>\n<li>사이트가 변하는 부분들을 프론트엔드에서 대부분 처리한다. 즉, 프론트엔드 코드에서 페이지 리소스들이 미리 정의되어 있고, 서버와의 통신은 API 통신을 이용한다.</li>\n<li>빠르게 페이지가 구현되어 보이지만, 페이지의 내용은 API 호출이 완료된 후에 보여진다.</li>\n<li>프로젝트 구성이 복잡하고, 개발 사이즈가 크다는 단점이 있다.</li>\n</ul>\n<h5>SSR 특징</h5>\n<ul>\n<li>사이트가 변하는 부분들을 대부분 백엔드에서 처리하여 HTML 파일을 작성해 프론트엔드로 전달한다.</li>\n<li>프로젝트의 구성이 간단하고, 개발 사이즈가 작아진다.</li>\n<li>로딩이 완료되는 경우 페이지와 데이터가 한 번에 표시되고, 페이지가 이동할 때마다 다시 로딩해야 하는 단점으로 인해 페이지 깜빡임 현상이 관측되고, 사용자가 보기에 상대적으로 로딩이 느려보인다.</li>\n</ul>\n<h3>웹 프레임워크</h3>\n<p>웹 프레임워크는 웹 서비스에 필요한 기능들을 제공해주는 다양한 도구들의 모음(Express.js, Koa.js, Nest.js 등)을 의미한다. 웹 서비스를 구성하기 위해서는 많은 기능이 필요한데, 모두 직접 만드는 것은 비즈니스적으로 초과 비용을 발생시키기 떄문에 정형화된 많은 부분(HTTP 요청과 응답 처리, 라우팅, HTML Templating 등)을 간단하게 구현하는 프레임워크를 활용해 필요한 부분만 집중해서 개발할 수 있다.</p>\n<h4>HTTP 요청 처리</h4>\n<p>웹 프레임워크는 어떤 데이터를 필요로 하는지, 어떤 사용자로부터 요청이 수신되었는지 등을 처리할 수 있다.</p>\n<h4>HTTP 응답 처리</h4>\n<p>웹 프레임워크는 응답 데이터가 어떤 형식인지, 응답 상태가 정상인지 등을 처리할 수 있다.</p>\n<h4>라우팅</h4>\n<p>웹 프레임워크는 HTTP 요청을 분기하는 방법 즉, 라우팅 기능을 제공한다. 이는 HTTP 요청 URL에 해당하는 알맞은 응답의 경로를 미리 설정할 수 있는 방법을 제공하는 것을 말한다.</p>\n<h4>HTML Templating</h4>\n<p>웹 프레임워크는 SSR을 구현하기 위한 방법으로, 응답으로 보낼 HTML을 서버에서 작성할 때 HTML Template을 통해 페이지의 뼈대를 작성할 수 있게 해준다.</p>\n<h2>Express.js</h2>\n<p>Express.js는 Node.js의 웹 프레임워크 중 가장 유명한 웹 프레임워크로, 필요에 따라 유연하게 구조를 설정할 수 있으며 다양한 미들웨어를 통해 필요한 기능을 간단하게 추가할 수 있다는 장점을 갖고 있다.</p>\n<p>또한, 모든 동작이 명시적으로 구성되기 때문에, 웹 프레임워크의 동작 방식을 이해하기 가장 좋은 프레임워크이다.</p>\n<h3>Express.js 시작하기</h3>\n<p><code class=\"language-text\">npm init</code> 명령어로 Express.js를 시작해 처음부터 작성할 수 있지만, 직접 모든 구조를 작성해야 하는 어려움이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">mkdir projectName &quot;디렉토리 생성&quot;\r\ncd projectName  &quot;디렉토리 이동&quot;\r\nnpm init &quot;프로젝트 생성&quot;\r\nnpm i express &quot;express 패키지 설치&quot;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Express!\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server Started\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>따라서 Express-generator라는 프로젝트 생성기를 통해 프로젝트의 기본 구조를 자동으로 생성해 빠르게 프로젝트를 시작할 수 있다. 생성된 프로젝트는 <code class=\"language-text\">npm start</code> 명령어로 실행할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"command\"><pre class=\"language-command\"><code class=\"language-command\">npm i -g express-generator  &quot;express-generator 설치&quot;\r\nexpress projectName  &quot;express.js 프로젝트 생성&quot;\r\ncd projectName  &quot;디렉토리 이동&quot;\r\nnpm install  &quot;패키지 설치&quot;\r\nnpm start  &quot;서버 실행&quot;</code></pre></div>\n<p>다만, Express-generator를 사용하는 경우 프로젝트 생성 이후에는 사용되지 않기 때문에 npx를 통해 설치하지 않고 바로 사용이 가능하다.</p>\n<h3>Express.js 구조</h3>\n<blockquote>\n<p>projectName\r\n⊢ app.js → Express.js의 가장 기본 파일로, 웹 어플리케이션의 기능을 정의\r\n⊢ bin/www → Express.js의 실행부, 포트와 실행 오류 등을 정의\r\n⊢ package.json → 프로젝트 의존성 및 스크립트 정의\r\n⊢ public → 코드를 통하지 않고, 직접 제공되는 파일 디렉토리\r\n⊢ routes → 라우팅 파일 디렉토리\r\n⊢ views → HTML Template 디렉토리</p>\n</blockquote>\n<h3>Express.js 동작 방식</h3>\n<p>프로젝트 디렉토리에서 <code class=\"language-text\">npm start</code> 명령어로 프로젝트를 실행할 수 있고, 이후 <code class=\"language-text\">http://localhost:3000/</code>에 접속하면 페이지를 확인할 수 있다.</p>\n<blockquote>\n<p><code class=\"language-text\">http://localhost:3000</code>에 접속\r\napp.js → app.use(’/’, indexRouter)\r\nroutes/index.js → route.get(’/’, …)\r\nroutes/index.js → res.render(‘index’, …)\r\nviews/index.jade</p>\n</blockquote>\n<h4>app 객체</h4>\n<blockquote>\n<p>app.js</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">var</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">app.js</code>에서 express.js Module을 불러온 다음, <code class=\"language-text\">app</code> 객체를 생성하는 것을 확인할 수 있다. <code class=\"language-text\">app</code> 객체는 Express.js의 기능을 담은 객체로, Express.js의 모든 동작은 <code class=\"language-text\">app</code> 객체에 정의된다.</p>\n<ul>\n<li><code class=\"language-text\">app.use()</code>: 미들웨어를 사용하기 위한 함수</li>\n<li><code class=\"language-text\">app.listen()</code>: HTTP 서버를 생성해주는 함수</li>\n<li><code class=\"language-text\">app.locals</code>: app에서 사용할 공통 상수(global 변수를 선언하지 않음)</li>\n</ul>\n<h4>라우팅</h4>\n<p>Express.js는 다양한 라우팅 방식을 제공하는데, 크게 <code class=\"language-text\">app</code> 라우팅과 <code class=\"language-text\">Express.Router</code>를 통한 라우팅으로 구분된다.</p>\n<h5><code class=\"language-text\">app</code> 라우팅</h5>\n<p><code class=\"language-text\">app</code> 객체에서 직접 <code class=\"language-text\">get</code>, <code class=\"language-text\">post</code>, <code class=\"language-text\">put</code>, <code class=\"language-text\">delete</code>, <code class=\"language-text\">all</code> 함수를 활용해 HTTP Method로 라우팅할 수 있다. 첫 번째 인자로 <strong>라우팅을 실행할 URL</strong>을 받고, 마지막 인자로 <strong>라우팅이 실행될 때 동작하는 함수</strong>를 받는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get /\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post /\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"put /\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"delete /\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"all /\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>다만 <code class=\"language-text\">app</code> 라우팅을 통해서는 핵심인 그룹화를 지원하지 않는다는 점이 단점이다. 따라서 Express.Router를 통해 라우팅을 모듈화할 수 있다.</p>\n<h4>Express.Router</h4>\n<p><code class=\"language-text\">router</code> 객체에도 <code class=\"language-text\">get</code>, <code class=\"language-text\">post</code>, <code class=\"language-text\">put</code>, <code class=\"language-text\">delete</code> 함수를 활용할 수 있다. 동일한 동작을 하기 때문에 인자도 동일하게 받는다. 라우터는 일반적으로 Module로 만들어서 사용하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> express<span class=\"token punctuation\">.</span><span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"respond with a resources.\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> router</code></pre></div>\n<p>이렇게 작성한 Module을 <code class=\"language-text\">app.js</code>에서 <code class=\"language-text\">use</code> 함수로 연결해 사용할 수 있다. 또한, <code class=\"language-text\">router</code> 객체에도 하위 라우터를 <code class=\"language-text\">use</code> 함수로 연결해 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> userRouter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./routes/users\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\napp<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> userRouter<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> petRouter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./pets\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> express<span class=\"token punctuation\">.</span><span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/pets\"</span><span class=\"token punctuation\">,</span> petRouter<span class=\"token punctuation\">)</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> router</code></pre></div>\n<h4>Path Parameters</h4>\n<p>path parameter를 사용하면, 주소의 일부를 변수처럼 사용할 수 있다.</p>\n<h4>Request Handler</h4>\n<p>라우팅에 적용되는 함수로, HTTP 요청과 응답을 다루는 함수로 설정된 라우팅 경로에 해당하는 요청이 들어오면 실행된다.</p>\n<p><code class=\"language-text\">router</code>나 <code class=\"language-text\">app</code>의 HTTP method 함수의 가장 마지막 인자로 전달되는 함수로 요청을 확인하고, 응답을 보내는 역할을 한다.</p>\n<h5>Request 객체</h5>\n<p>HTTP 요청 정보를 가진 객체로, HTTP 요청의 path parameter, query parameter, body, header 등을 확인할 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">req.params</code>:</li>\n<li><code class=\"language-text\">req.queries</code>:</li>\n<li><code class=\"language-text\">req.body</code>: POST 요청의 요청 데이터를 불러오는 함수</li>\n<li><code class=\"language-text\">req.get('headerName')</code>: HTTP Request 의 헤더 값을 가져오는 함수</li>\n</ul>\n<h5>Response 객체</h5>\n<p>HTTP 응답을 처리하는 객체로, HTTP 응답의 데이터를 전송하거나, 응답 상태 및 header 등을 설정할 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">res.send()</code>: text 형식의 HTTP 응답을 전송하는 함수</li>\n<li><code class=\"language-text\">res.json()</code>: json 형식의 HTTP 응답을 전송하는 함수</li>\n<li><code class=\"language-text\">res.render()</code>: HTML Template을 사용하여 화면을 전송하는 함수</li>\n<li><code class=\"language-text\">res.set()</code>: HTTP 응답의 헤더를 설정하는 함수</li>\n<li><code class=\"language-text\">res.status()</code>: HTTP 응답의 상태 값을 설정하는 함수</li>\n</ul>","frontmatter":{"title":"[Elice SW 2기] mini-log #027 : Node.js Express.js와 MongoDB","date":"May 10, 2022","description":"Elice, SW, WEB, Frontend, Bootcamp, HTML, CSS, JavaScript, OOP, Node.js, modules, npm, express.js, REST API, MongoDB, mongoose"}},"previous":{"fields":{"slug":"/2022-05-09/"},"frontmatter":{"title":"[Elice SW 2기] mini-log #026 : Node.js와 npm 그리고 modules"}},"next":{"fields":{"slug":"/2022-05-11/"},"frontmatter":{"title":"[Elice SW 2기] mini-log #028 : Node.js Express.js와 MongoDB 2"}}},"pageContext":{"id":"48b0a5e8-2950-523a-a79d-cd3d0193ce2d","previousPostId":"1bd8cd2f-f16d-5e57-b242-5de339ad09fe","nextPostId":"4b4efbe8-0661-5c6c-8853-0f3b2e045c00"}},
    "staticQueryHashes": ["2841359383","3257411868"]}