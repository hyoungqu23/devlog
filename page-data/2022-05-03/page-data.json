{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2022-05-03/",
    "result": {"data":{"site":{"siteMetadata":{"title":"HyoungMin's mini-log"}},"markdownRemark":{"id":"014a0937-c78b-5fec-855d-9f59a2c4c517","excerpt":"Node.js 이해하기 Node.js의 등장 배경 Node.js는 WEB의 발전에 의해 등장한 기술로, 단방향 통신 위주의 WEB 1.0에서 사용자와의 상호작용이 중요해지는 WEB 2.0으로 발전하면서 고성능 JavaScript 실행의 필요성이 대두되었다. 따라서 Chrome…","html":"<h2>Node.js 이해하기</h2>\n<h3>Node.js의 등장 배경</h3>\n<p>Node.js는 WEB의 발전에 의해 등장한 기술로, 단방향 통신 위주의 WEB 1.0에서 사용자와의 상호작용이 중요해지는 WEB 2.0으로 발전하면서 고성능 JavaScript 실행의 필요성이 대두되었다. 따라서 Chrome 브라우저의 V8 엔진이 등장했다. 이로 인해 JavaScript의 실행 속도가 현저히 빨라졌고, 오픈소스였던 V8 엔진을 활용해 웹 브라우저에서만 사용할 수 있는 것이 아니라, 어느 환경에서나 실행할 수 있게 해주는 실행기로서 Node.js가 탄생했다.</p>\n<h3>Node.js 활용</h3>\n<table>\n<thead>\n<tr>\n<th>Browser</th>\n<th>Node.js</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>브라우저에서 실행</td>\n<td>크로스 플랫폼 실행</td>\n</tr>\n<tr>\n<td>웹 내부의 제한된 동작</td>\n<td>제한 없는 동작</td>\n</tr>\n<tr>\n<td>웹 프론트 개발자의 언어</td>\n<td>다양한 어플리케이션 개발 가능</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Front-end: <code class=\"language-text\">React.js</code></li>\n<li>Back-end: <code class=\"language-text\">Express.js</code></li>\n<li>Mobile-App: <code class=\"language-text\">React-Native</code></li>\n<li>Desktop-App: <code class=\"language-text\">Electron</code></li>\n<li>Machine-Learning: <code class=\"language-text\">Brain.js</code></li>\n</ul>\n<h2>Node.js 특징</h2>\n<blockquote>\n<p>Single Thread이기 때문에 비동기로 동작하고, 이를 구현하기 위해 이벤트 기반으로 처리한다.</p>\n</blockquote>\n<h3>Single Thread</h3>\n<p>Thread는 명령을 실행하는 단위로, 한 개의 Thread는 한 번에 한 가지 동작만 실행할 수 있다. 이와 달리 Multi Thread는 동시에 여러 Thread를 활용하면서 동시에 여러 동작을 수행할 수 있다.</p>\n<p>Node.js는 Thread 기반의 작업이 비효율적인 Single Thread 방식이기 때문에 CPU 리소스 관리에 효율적이고, 비동기 동작으로 Thread 기반의 작업을 최소화한다.</p>\n<h3>Asynchronous</h3>\n<p>동작을 실행한 후 완료를 기다리지 않는 방식을 의미한다. 즉, 동작의 완료를 기다리지 않기 때문에 다른 동작을 바로 실행할 수 있다. Node.js는 Single Thread 방식이기 때문에 비동기 방식을 활용하고 있다.</p>\n<h3>Event driven</h3>\n<p>비동기 동작의 완료를 처리하는 방법으로 사용된다. 비동기 방식은 특정 동작을 실행한 후 완료를 신경쓰지 않기 때문에 완료될 경우 실행할 함수를 미리 등록해놓고 있다. 이를 ‘이벤트를 등록한다’고 한다. 따라서 이러한 비동기 동작이 완료되면 미리 등록된 함수(이벤트)가 실행된다.</p>\n<h2>Node.js 시작하기</h2>\n<p>최신 버전에서는 보안 이슈, 버그 수정, 최신 기술들이 급진적으로 적용되기 떄문에 가장 안정적인 버전인 <a href=\"https://nodejs.org/ko/download/\">LTS(Long-Term Support) 버전</a>을 선택하는 것이 최선이다.</p>\n<h2>ES6 문법</h2>\n<p>일반적으로 ES6는 ECMAScript 6버전 이후를 통틀어 부르는 현대적인 JavaScript의 표준 문법이다.</p>\n<p>기존 JavaScript보다 생산성 향상에 도움을 주고, Node.js는 빠르게 최신 ECMAScript를 지원하기 때문에 적절히 활용해야 한다.</p>\n<h3><code class=\"language-text\">let</code>, <code class=\"language-text\">const</code></h3>\n<p>상수와 변수를 구분할 수 있고, Block Scope를 가진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Node.js\"</span>\r\n<span class=\"token keyword\">let</span> desc <span class=\"token operator\">=</span> <span class=\"token string\">\"JavaScript\"</span>\r\n\r\ndesc <span class=\"token operator\">=</span> <span class=\"token string\">\"JavaScript &amp; React.js\"</span>\r\n<span class=\"token constant\">TITLE</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Node\"</span> <span class=\"token comment\">// error</span></code></pre></div>\n<h3>Template Literal</h3>\n<p>문자열 사이에 간단하게 변수를 사용하고, 따옴표를 활용할 수 있으며 줄 바꿈을 지원한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">NAME</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Lee\"</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token constant\">AGE</span> <span class=\"token operator\">=</span> <span class=\"token number\">28</span>\r\n\r\n<span class=\"token keyword\">let</span> introduction <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">My name is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">NAME</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\r\n  I'm </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">AGE</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> years old.\r\n  Nice to meet you.</span><span class=\"token template-punctuation string\">`</span></span>\r\n\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>introduction<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Arrow Function</h3>\n<p>상수형으로 선언하거나 간결하게 익명 함수를 선언하는 등 다양한 방법으로 선언할 수 있게 되었고, 같은 이름의 상수형 함수를 재선언하는 것은 불가능해졌다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">arrowFunc</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">param</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>param<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"no name\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Class</h3>\n<p>기존에 함수와 prototype을 통해 객체 지향 프로그래밍을 구현했지만, ES6에서는 일반적인 형태의 객체 지향 코드인 Class 구현이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">getInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> player <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Faker\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span>\r\nplayer<span class=\"token punctuation\">.</span><span class=\"token function\">getInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Destructuring</h3>\n<p>기존에는 배열과 객체에서 index와 key 값을 통해 한 줄씩 값을 조회했는데, ES6에서는 Destructuring 문법을 통해 쉽게 값을 조회하고 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Faker\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span> <span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> age <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> obj\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">playerName</span><span class=\"token operator\">:</span> name<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">playerAge</span><span class=\"token operator\">:</span> age <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> obj\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>playerName<span class=\"token punctuation\">,</span> playerAge<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"some\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"other\"</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arr\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>비동기</h2>\n<p>이벤트 기반 동작을 코드로 구현하는 방법으로, Node.js에는 비동기 동작을 구현하는 세 가지 방법이 있다.</p>\n<h3>콜백 패턴: 전통적인 이벤트 기반 코딩 방식</h3>\n<p>콜백 패턴은 이벤트 함수를 비동기 동작의 인자로 전달하는 방식을 말한다. 비동기 동작이 완료되면, 콜백 함수가 실행된다.</p>\n<p>참고로 콜백 함수의 첫 번째 인자는 에러를 전달하는 것이 표준이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 비동기</span>\r\ndb<span class=\"token punctuation\">.</span><span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> users</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token comment\">// 익명 콜백 함수</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>콜백을 사용한 비동기 동작을 동기적으로 실행해야 할 경우에 콜백 지옥에 빠질 수 있다.</p>\n<h3>Promise 패턴: 콜백 지옥을 해결하기 위한 비동기 코딩 방식</h3>\n<p>콜백 지옥을 해결하기 위해 등장한 방식으로, 동작이 완료되면 <code class=\"language-text\">then</code> 메서드에 등록된 콜백이 실행되고, 에러가 발생한 경우 <code class=\"language-text\">catch</code> 메서드에 등록된 콜백이 실행된다.</p>\n<p><code class=\"language-text\">then</code> 메서드의 반환 값으로 다시 Promise를 사용하면 체이닝 기법을 통해 코드를 더 간결하게 작성할 수 있고, 비동기 동작을 동기적으로 수행할 수 있어 콜백 지옥을 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">db<span class=\"token punctuation\">.</span><span class=\"token function\">getUserPromise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token function\">promise1</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r1</span> <span class=\"token operator\">=></span> <span class=\"token function\">promise2</span><span class=\"token punctuation\">(</span>r1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Promise는 실행 결과에 따라 구분되는 resolve, reject 두 가지 함수를 가진다. reject는 catch에 등록된 콜백 함수를 실행하고, resolve는 then에 등록된 콜백을 실행하게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getUserPromise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">return</span>\r\n      <span class=\"token punctuation\">}</span>\r\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>예시</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">adder</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> b <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"no zero\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">return</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>a<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">+</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>b<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>a <span class=\"token operator\">+</span> b<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">handle_error</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ERROR: \"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">adder_promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">adder</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">/* 1. promise 에서 에러 처리하기 */</span>\r\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">return</span>\r\n      <span class=\"token punctuation\">}</span>\r\n      <span class=\"token comment\">/* 2. promise 에서 결과값 처리하기 */</span>\r\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">function</span> <span class=\"token function\">add_all</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">adder_promise</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token function\">adder_promise</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\">/* 3. then 을 활용하여 result 와 c 를 add_promise 하기 */</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result2</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>a<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">+</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>b<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">+</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>c<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result2<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\">/* 4. catch 를 활용하여 promise 의 에러를 handle_error 함수로 전달하기 */</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token function\">handle_error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> add_all</code></pre></div>\n<h3>Async - Await 패턴: Promise 패턴의 표현법을 개선한 비동기 코딩 방식</h3>\n<p>Promise 패턴의 표현법을 순차적 프로그래밍처럼 작성할 수 있도록 개선한 것이 Async - Await 패턴이다. 내부적으로 Promise를 사용하기에 Promise의 다른 문법이라고 할 수 있다. 즉, async 함수 내에서 promise 함수의 결과는 await으로 받을 수 있고, 해당 await 한 함수가 완료될 때까지 다음 라인으로 넘어가지 않는다.</p>\n<p>async 함수는 Promise를 반환한다는 점을 유의해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">func1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> r1 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> r2 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise2</span><span class=\"token punctuation\">(</span>r1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">const</span> r3 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise3</span><span class=\"token punctuation\">(</span>r1<span class=\"token punctuation\">,</span> r2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">return</span> r3<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token function\">func1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r3</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>r3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">try</code> - <code class=\"language-text\">catch</code> 구문으로 에러를 처리할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> r <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Promise의 병렬적 실행</h4>\n<p><code class=\"language-text\">Promise.all()</code>은 promise 함수를 동시에 실행시키고 등록된 모든 함수가 마무리되면 결과값을 한꺼번에 반환하기 때문에 더욱 효율적이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> r1 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> r2 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promise2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>r1<span class=\"token punctuation\">,</span> r2<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">parallel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>r1<span class=\"token punctuation\">,</span> r2<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token function\">promise1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">promise2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>r1<span class=\"token punctuation\">,</span> r2<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Event Loop</h2>\n<p>이벤트를 처리하는 반복되는 동작으로, 비동기-이벤트 동작을 처리하는 일련의 반복 동작을 말한다. Event Loop에 대해 이해하면 Node.js의 비동기 코딩이 어떤 순서로 수행되는지에 대해 이해할 수 있다.</p>\n<p>JavaScript에도 존재하는데, 두 동작 방식에는 큰 차이가 없다.</p>\n<h3>Call Stack</h3>\n<p>작성된 함수들이 등록되는 LIFO(Last-In, First-Out) 방식의 Stack으로, Event Loop는 <strong>Call Stack이 비어있을 때까지</strong> Stack의 함수를 실행한다.</p>\n<h3>Message Queue</h3>\n<p>setTimeout과 같은 지연 실행 함수를 등록하는 FIFO(First-In, First-Out) 방식의 Queue로, Event Loop는 정해진 지연 시간이 끝나고 <strong>Call Stack이 비어 있는 경우</strong> 등록된 함수를 Call Stack에 추가한다.</p>\n<h3>Job Queue</h3>\n<p>Promise에 등록된 콜백을 등록하는 FIFO(First-In, First-Out) 방식의 Queue로, Event Loop는 <strong>상위 함수가 종료되기 전에 Call Stack이 비어있지 않더라도</strong>, Job Queue에 등록된 콜백을 Call Stack에 추가한다.</p>\n<h3>예시</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func1 - 1\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func2 - 1\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">function</span> <span class=\"token function\">func3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func3\"</span><span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func4, setTimeout\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func2 - 2\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func5</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func5\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"func1 - 2\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"[Elice SW 2기] mini-log #022 : Node.js 기초","date":"May 03, 2022","description":"Elice, SW, WEB, Frontend, Bootcamp, HTML, CSS, JavaScript, OOP, TypeScript, Node.js"}},"previous":{"fields":{"slug":"/2022-05-02/"},"frontmatter":{"title":"[Elice SW 2기] mini-log #021 : JavaScript 비동기와 Node.js 기초"}},"next":{"fields":{"slug":"/2022-05-04/"},"frontmatter":{"title":"[Elice SW 2기] mini-log #023 : TypeScript 기초"}}},"pageContext":{"id":"014a0937-c78b-5fec-855d-9f59a2c4c517","previousPostId":"2a706d74-7aa8-5dff-8c13-f6fe945afb60","nextPostId":"12955349-1ca4-5f6d-917a-e6c395fa2e36"}},
    "staticQueryHashes": ["2841359383","3257411868"]}